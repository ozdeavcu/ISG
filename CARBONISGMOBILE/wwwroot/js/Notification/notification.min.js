function startRecording(){navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{mediaRecorder=new MediaRecorder(n),mediaRecorder.ondataavailable=n=>{audioChunks.push(n.data)},mediaRecorder.onstop=()=>{audioBlob=new Blob(audioChunks,{type:"audio/wav"});console.log("Audio Blob:",audioBlob);const n=URL.createObjectURL(audioBlob);audio.src=n;audioChunks=[]},mediaRecorder.start()}).catch(n=>{console.error("Ses kaydında bir hata oluştu:",n)})}isActive===!0?document.getElementById("darkRadio1").checked=!0:document.getElementById("darkRadio2").checked=!0;$(document).ready(function(){function n(){$(".carousel-item").length>1?$(".carousel-control-prev, .carousel-control-next").show():$(".carousel-control-prev, .carousel-control-next").hide()}$(document).on("click",".close-btn",function(){const t=$(this).closest(".carousel-item");t.remove();$(".carousel-item").length===0?$('input[type="file"]').val(""):$(".carousel-item.active").length||$(".carousel-item").first().addClass("active");n()});$('input[type="file"]').on("change",function(){const t=this.files,i=$(".carousel-inner");t.length>0&&Array.from(t).forEach(t=>{if(t.type.startsWith("image/")){const r=new FileReader;r.onload=function(t){const r=$(`
            <div class="carousel-item">
              <img class="d-block w-100" src="${t.target.result}" alt="Önizleme Görseli">
              <button type="button" class="close-btn">&times;</button>
            </div>
          `);i.find(".carousel-item").length||r.addClass("active");i.append(r);n()};r.readAsDataURL(t)}})});n()});const startRecordButton=document.getElementById("startRecord"),deleteButton=document.getElementById("deleteRecord"),playPauseButton=document.getElementById("playPause"),muteButton=document.getElementById("mute"),audio=document.getElementById("audioPlayback"),progressBar=document.getElementById("progress");let mediaRecorder,audioChunks=[],isRecording=!1,isPlaying=!1,audioBlob,currentAudioURL=null;audioUrl&&audioUrl.trim()!==""?audio.src=audioUrl:audio.style.display="none";startRecordButton.onclick=n=>{n.preventDefault(),isRecording?(mediaRecorder.stop(),startRecordButton.classList.remove("flash"),isRecording=!1):(startRecording(),startRecordButton.classList.add("flash"),isRecording=!0)};playPauseButton.onclick=n=>{if(n.preventDefault(),!audio.src||audio.src===window.location.href){console.warn("Ses çalma uyarısı: Geçerli ses kaynağı yok.");return}isPlaying?(audio.pause(),playPauseButton.innerHTML="<i class='bi bi-play-circle-fill'><\/i>",isPlaying=!1):(audio.play().catch(n=>{console.error("Ses çalma hatası:",n)}),playPauseButton.innerHTML="<i class='bi bi-pause-circle-fill'><\/i>",isPlaying=!0)};audio.onplay=()=>{isPlaying=!0,setInterval(()=>{const n=audio.currentTime/audio.duration*100;progressBar.value=n},1e3)};audio.onpause=()=>{isPlaying=!1};document.getElementById("attachFile").addEventListener("click",function(n){n.preventDefault();document.getElementById("audioFileUpload").click()});deleteButton.onclick=n=>{n.preventDefault(),currentAudioURL&&(URL.revokeObjectURL(currentAudioURL),currentAudioURL=null),audio.pause(),audio.src="",audio.currentTime=0,progressBar.value=0,audioBlob=null,audioChunks=[],startRecordButton.classList.remove("flash"),isRecording=!1,document.getElementById("audioFileUpload").value=""};document.getElementById("audioFileUpload").addEventListener("change",function(n){n.preventDefault();const t=n.target.files[0];if(t){const n=t.type;n.startsWith("audio/")?(currentAudioURL&&URL.revokeObjectURL(currentAudioURL),currentAudioURL=URL.createObjectURL(t),audio.pause(),audio.src=currentAudioURL,audio.currentTime=0,progressBar.value=0,isPlaying=!1,playPauseButton.innerHTML="<i class='bi bi-play-circle-fill'><\/i>"):alert("Lütfen bir ses dosyası seçin.")}});